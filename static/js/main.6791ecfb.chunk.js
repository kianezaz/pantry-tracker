(this["webpackJsonppantry-tracker"]=this["webpackJsonppantry-tracker"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},84:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(45),i=n.n(c),s=n(16),o=(n(62),n(3)),l=n(15),u=n(2),d=(n(63),n(5)),j=n(1),b=n(35),m=function(e){var t=(new Date).toISOString(),n=e.item.expirationDate>t?"text-dark":"text-danger";return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:n,children:e.item.name}),Object(j.jsx)("td",{className:n,children:e.item.count}),Object(j.jsx)("td",{className:n,children:b(e.item.expirationDate).format("MMMM Do YYYY")}),Object(j.jsxs)("td",{children:[Object(j.jsx)("button",{onClick:function(){return e.onIncrement(e.item)},className:"btn btn-dark btn-sm",children:"Increment"}),"  |  ",Object(j.jsx)("button",{onClick:function(){return e.onDecrement(e.item)},className:"btn btn-dark btn-sm",children:"Decrement"}),"  |  ",Object(j.jsx)("button",{onClick:function(){return e.onDelete(e.item)},className:"btn btn-dark btn-sm",children:"Delete"})]})]})},h=n(20),p=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Logged Pantry Items"}),Object(j.jsx)("div",{style:{display:"block",width:700},children:Object(j.jsxs)(h.a,{children:[Object(j.jsx)(h.a.Toggle,{variant:"secondary",children:"Sort by"}),Object(j.jsxs)(h.a.Menu,{children:[Object(j.jsx)(h.a.Item,{onClick:e.sortByName,children:"Name"}),Object(j.jsx)(h.a.Item,{onClick:e.sortByExpirationDate,children:"Expiration Date"})]})]})}),Object(j.jsxs)("table",{className:"table table-striped",children:[Object(j.jsx)("thead",{className:"thead-dark",children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Item"}),Object(j.jsx)("th",{children:"Quantity"}),Object(j.jsx)("th",{children:"Expiration Date"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:e.items.map((function(t){return Object(j.jsx)(m,{item:t,onIncrement:e.onIncrement,onDecrement:e.onDecrement,onDelete:e.onDelete},t._id)}))})]})]})},x=n(48),O=n(49),g=n(14),f=n(56),v=n(54),y=(n(66),n(10)),N=n.n(y),D="http://localhost:5000/user/",k=function(e,t){return N.a.post(D+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},S=function(){localStorage.removeItem("user")},I=function(e,t,n){return N.a.post(D+"signup",{username:e,email:t,password:n})},C=function(){return JSON.parse(localStorage.getItem("user"))};function w(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}n(35);var E,B,T,P,M,Y,L=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).onChangeName=a.onChangeName.bind(Object(g.a)(a)),a.onChangeCount=a.onChangeCount.bind(Object(g.a)(a)),a.onChangeDate=a.onChangeDate.bind(Object(g.a)(a)),a.onSubmit=a.onSubmit.bind(Object(g.a)(a)),a.validDate=a.validDate.bind(Object(g.a)(a)),a.extractDate=a.extractDate.bind(Object(g.a)(a)),a.state={name:"",nameError:!1,count:"",countError:!1,expirationDate:"",expirationDateError:!1},a}return Object(O.a)(n,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeCount",value:function(e){this.setState({count:e.target.value})}},{key:"validDate",value:function(e){return!!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e)}},{key:"extractDate",value:function(e){var t=e.split("/"),n=parseInt(t[1]),a=parseInt(t[0])-1,r=parseInt(t[2]);return new Date(r,a,n)}},{key:"validSubmission",value:function(e,t,n){var a,r,c=!1;return""!==e&&void 0!==e||(a=!0),this.setState({nameError:a}),isNaN(parseInt(t))&&(r=!0),this.setState({countError:r}),this.validDate(n)||(c=!0),this.setState({expirationDateError:c}),!(a||r||c)}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.validSubmission(this.state.name,this.state.count,this.state.expirationDate))if(null!==this.extractDate(this.state.expirationDate)){var n=this.state.expirationDate.split("/"),a=parseInt(n[1]),r=parseInt(n[0])-1,c=parseInt(n[2]),i={name:this.state.name,count:this.state.count,expirationDate:new Date(c,r,a),userId:C().id};N.a.post("http://localhost:5000/pantry/add",i,{headers:w()}).then((function(e){console.log(e.data),t.props.itemHandler(e.data)})),window.location="/pantry"}else console.log("Enter correct date format")}},{key:"onChangeDate",value:function(e){this.setState({expirationDate:e.target.value})}},{key:"styleTextBox",value:function(e){return e?{backgroundColor:"rgba(255,0,0,.5)"}:{backgroundColor:"white"}}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Add new item to pantry"}),Object(j.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Name: "}),Object(j.jsx)("input",{type:"text",className:"form-control",value:this.state.name,onChange:this.onChangeName,style:this.styleTextBox(this.state.nameError)})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Quantity: "}),Object(j.jsx)("input",{type:"text",className:"form-control",value:this.state.count,onChange:this.onChangeCount,style:this.styleTextBox(this.state.countError)})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Expiration Date: "}),Object(j.jsx)("input",{className:"form-control",type:"text",placeholder:"MM/DD/YYYY",onChange:this.onChangeDate,style:this.styleTextBox(this.state.expirationDateError)})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{type:"submit",value:"Add Item to Pantry",className:"btn btn-primary"})})]})]})}}]),n}(r.a.Component),q=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{className:"font-weight-bold",children:e.recipe.name}),Object(j.jsx)("img",{src:e.recipe.image}),Object(j.jsxs)("ul",{className:"list-group list-group-flush",children:[e.recipe.presentIngredients.map((function(e){return Object(j.jsx)("li",{className:"list-group-item",children:Object(j.jsx)("p",{className:"text-success",children:e.name})},e.id)})),e.recipe.missingIngredients.map((function(e){return Object(j.jsx)("li",{className:"list-group-item",children:Object(j.jsx)("p",{className:"text-danger",children:e.name})},e.id)}))]})]})},A=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=!0,n=e.items.map((function(e){return e.name})).join(",+");return N.a.get("http://localhost:5000/recipes/apiKey").then((function(e){var a="https://api.spoonacular.com/recipes/findByIngredients?apiKey=".concat(e.data,"&ingredients=").concat(n);N.a.get(a).then((function(e){console.log(e),t&&c(e.data.map((function(e){return{id:e.id,name:e.title,presentIngredients:e.usedIngredients.map((function(e){return{name:e.name,id:e.id}})),missingIngredients:e.missedIngredients.map((function(e){return{name:e.name,id:e.id}})),image:e.image}})))}))})),function(){t=!1}}),[]),r.length>0?Object(j.jsx)("ul",{className:"list-group",children:r.map((function(e){return Object(j.jsx)("li",{className:"list-group-item",children:Object(j.jsx)(q,{recipe:e})},e.id)}))}):Object(j.jsx)("p",{children:"Add some ingredients to find suggested recipes!"})},J=(n(84),n.p+"static/media/grocery-produce.74e712c1.jpg"),z=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),s=Object(u.a)(i,2),o=s[0],l=s[1],b=Object(a.useState)(""),m=Object(u.a)(b,2),h=m[0],p=m[1],x=Object(d.g)();return Object(j.jsxs)("div",{style:{backgroundImage:"url(".concat(J,")"),height:"100vh",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[Object(j.jsx)("div",{className:"form-container",children:Object(j.jsx)("form",{onSubmit:function(e){e.preventDefault(),k(r,o).then((function(e){x.push({pathname:"/pantry"})}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();p(t)}))},children:Object(j.jsxs)("div",{className:"inputs-container",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Username: "}),Object(j.jsx)("input",{required:!0,type:"text",className:"form-control",value:r,onChange:function(e){c(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{id:"password",children:"Password: "}),Object(j.jsx)("input",{required:!0,type:"password",className:"form-control",value:o,onChange:function(e){l(e.target.value)}})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{id:"submit-button",type:"submit",className:"btn btn-primary",value:"Log in"})}),Object(j.jsx)("button",{id:"register-button",onClick:function(e){e.preventDefault(),window.location="/signup"},children:"New user? Sign up"})]})})}),h&&Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("div",{className:"alert alert-danger",role:"alert",children:h})})]})},F=(n(89),function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),s=Object(u.a)(i,2),o=s[0],l=s[1],d=Object(a.useState)(""),b=Object(u.a)(d,2),m=b[0],h=b[1],p=Object(a.useState)(""),x=Object(u.a)(p,2),O=x[0],g=x[1],f=Object(a.useState)(!1),v=Object(u.a)(f,2),y=v[0],N=v[1];return Object(j.jsxs)("div",{style:{backgroundImage:"url(".concat(J,")"),height:"100vh",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[!y&&Object(j.jsx)("div",{className:"form-container",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(""),N(!1),I(o,r,m).then((function(e){g(e.data.message),N(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();g(t),N(!1)}))},children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Email: "}),Object(j.jsx)("input",{required:!0,type:"email",className:"form-control",value:r,onChange:function(e){c(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Username: "}),Object(j.jsx)("input",{required:!0,type:"text",className:"form-control",value:o,onChange:function(e){l(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Password: "}),Object(j.jsx)("input",{required:!0,type:"password",className:"form-control",value:m,onChange:function(e){h(e.target.value)}})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{id:"submit-button",type:"submit",value:"Register"})})]})}),y&&Object(j.jsx)("button",{id:"success",className:"btn btn-primary",onClick:function(e){window.location="/login"},children:"Click to Log In"}),O&&Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("div",{className:y?"alert alert-success":"alert alert-danger",role:"alert",children:O})})]})}),R=n(17),_=n(18),H=n(55),K=_.a.nav(E||(E=Object(R.a)(["\n    background: #000;\n    height: 80px;\n    display: flex;\n    justify-content: space-between;\n    padding: 0.5rem calc((100vw - 1000px) / 2);\n    z-index: 10;\n"]))),Q=Object(_.a)(s.b)(B||(B=Object(R.a)(["\n    color: #fff;\n    display: flex;\n    align-items: center;\n    text-decoration: none;\n    padding: 0 1rem;\n    height: 100%;\n    cursor: pointer;\n"]))),U=Object(_.a)(H.a)(T||(T=Object(R.a)(["\n    display: none;\n    color: #fff;\n\n    @media screen and (max-width: 768px) {\n        display: block;\n        position: absolute;\n        top: 0;\n        right: 0;\n        transform: translate(-100%, 75%);\n        font-size: 1.8rem;\n        cursor: ponter;\n    }\n"]))),$=_.a.div(P||(P=Object(R.a)(["\n    display: flex;\n    align-items: center;\n    margin-right: -24px;\n\n    @media screen and (max-width: 768px) {\n        display: none;\n    }\n"]))),G=_.a.nav(M||(M=Object(R.a)(["\n    display: flex;\n    align-items: center;\n    margin-right: 24px;\n\n    @media screen and (max-width: 768px) {\n        display: none;\n    }\n"]))),V=_.a.button(Y||(Y=Object(R.a)(["\n    border-radius: 4px;\n    background: #256ce1;\n    padding: 10px 22px;\n    color: #fff;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    transition: all 0.2s ease-in-out;\n    text-decoration; none;\n\n    $:hover {\n        transition: all 0.2s ease-in-out;\n        background: #fff;\n        color: #010606;\n    }\n"]))),W=function(e){return e.isLoggedIn?Object(j.jsx)("div",{children:Object(j.jsxs)(K,{children:[Object(j.jsx)(Q,{to:"/",children:Object(j.jsx)("h1",{children:"Pantry Tracker"})}),Object(j.jsx)(U,{}),Object(j.jsxs)($,{children:[Object(j.jsx)(Q,{to:"/pantry",children:"Home"}),Object(j.jsx)(Q,{to:"/add",children:"Add Item"}),Object(j.jsx)(Q,{to:"/recipes",children:"Recipes"})]}),Object(j.jsx)(G,{children:Object(j.jsx)(V,{onClick:function(e){S(),window.location="/login"},children:"Sign Out"})})]})}):null},X=n(7),Z=["render"],ee=function(e){var t=e.render,n=Object(X.a)(e,Z),a=C();return Object(j.jsx)(d.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return a?Object(j.jsx)(t,Object(o.a)({},e)):Object(j.jsx)(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var te=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(d.h)();function i(e){var t=e.count+1;N.a.put("http://localhost:5000/pantry?id="+e._id,{count:t},{headers:w()});var a=Object(l.a)(n),c=a.indexOf(e);a[c].count=t,r(a)}function s(e){var t=e.count-1;if(0==t)b(e);else{N.a.put("http://localhost:5000/pantry?id="+e._id,{count:t},{headers:w()});var a=Object(l.a)(n),c=a.indexOf(e);a[c].count=t,r(a)}}function b(e){N.a.delete("http://localhost:5000/pantry/?id="+e._id+"&userId="+C().id,{headers:w()}),r(n.filter((function(t){return t!==e})))}function m(e){var t=Object(l.a)(n);t.push(e),r(t)}function h(){var e=Object(l.a)(n);r(e.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})))}function x(){var e=Object(l.a)(n);r(e.sort((function(e,t){return e.expirationDate>t.expirationDate?1:e.expirationDate<t.expirationDate?-1:0})))}return Object(a.useEffect)((function(){var e=C();e&&N.a.get("http://localhost:5000/pantry?userId="+e.id,{headers:w()}).then((function(e){r(e.data)})).catch((function(e){return console.log(e)}))}),[c.key]),Object(j.jsxs)("div",{children:[Object(j.jsx)(W,{isLoggedIn:C()}),Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.b,{exact:!0,path:"/signup",component:F}),Object(j.jsx)(d.b,{exact:!0,path:"/",component:z}),Object(j.jsx)(d.b,{exact:!0,path:"/login",component:z}),Object(j.jsx)(ee,{exact:!0,path:"/pantry",render:function(e){return Object(j.jsx)(p,Object(o.a)(Object(o.a)({},e),{},{items:n,onIncrement:i,onDecrement:s,onDelete:b,sortByName:h,sortByExpirationDate:x}))}}),Object(j.jsx)(ee,{exact:!0,path:"/add",render:function(e){return Object(j.jsx)(L,{itemHandler:m})}}),Object(j.jsx)(ee,{exact:!0,path:"/recipes",render:function(e){return Object(j.jsx)(A,{items:n})}})]})]})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,97)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};n(90);i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(s.a,{children:Object(j.jsx)(te,{})})}),document.getElementById("root")),ne()}},[[91,1,2]]]);
//# sourceMappingURL=main.6791ecfb.chunk.js.map